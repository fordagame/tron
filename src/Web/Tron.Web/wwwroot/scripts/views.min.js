var __extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),Tron;(function(n){var t=function(n){function t(t){var i=n.call(this,document.createElement("div"),t)||this;return i.addEventListener({type:"click",selector:"#create_tron_game",listener:i.create_tron_game}),i}return __extends(t,n),t.prototype.render=function(t){var i=n.prototype.render.call(this,t),r=this.root.querySelector("#playerName");return r.innerHTML=this.presenter.getName(),i},t.prototype.create_tron_game=function(){var n=this.root.querySelector("#numberOfPlayers");this.presenter.createGame(parseInt(n.value))},t}(n.app.mvpExt.baseView);n.GamesView=t})(Tron||(Tron={}));__extends=this&&this.__extends||function(){var n=function(t,i){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])},n(t,i)};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t=function(t){function i(n){var i=t.call(this,document.createElement("div"),n)||this;return i.colors=["orange","blue","green","purple"],i.currentColors=["darkorange","darkblue","darkgreen","darkwhite"],i.keyHandler=i.handle_move.bind(i),document.addEventListener("keypress",i.keyHandler,!0),i}return __extends(i,t),i.prototype.render=function(n){return t.prototype.render.call(this,n)},i.prototype.handle_move=function(t){switch(t.which){case 100:this.presenter.updateDirection(n.TronGameDirection.Right);break;case 115:this.presenter.updateDirection(n.TronGameDirection.Down);break;case 97:this.presenter.updateDirection(n.TronGameDirection.Left);break;case 119:this.presenter.updateDirection(n.TronGameDirection.Up)}},i.prototype.drawInCanvas=function(n,t,i,r){var u=this.root.querySelector("#tron_game"),o=u.getContext("2d"),f,e;o.fillStyle=r?"red":this.colors[i];f=u.width/this.boardX;e=u.height/this.boardY;o.fillRect(n*f,t*e,f,e)},i.prototype.setGameData=function(n){this.boardX=n.boardx;this.boardY=n.boardy},i.prototype.updatePlayers=function(n){var r=this.root.querySelector("#activePlayers"),t,i;for(r.innerHTML="",t=0;t<n.length;t++)i=document.createElement("div"),r.appendChild(i),i.innerHTML=n[t].name,i.style.color=this.colors[n[t].position-1]},i.prototype.destroy=function(){document.removeEventListener("keypress",this.keyHandler,!0);t.prototype.destroy.call(this)},i}(n.app.mvpExt.baseView);n.TronView=t}(Tron||(Tron={}));